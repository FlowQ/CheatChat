extends conditional_layout

block content
  //sources
  link(rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css")

  script(src="//code.jquery.com/jquery-1.11.0.min.js")
  script(src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js")
  script(src='http://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.10/angular.min.js')
  script(src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.10/angular-sanitize.js")
  script(src="/javascripts/ui-bootstrap-0.11.0.js" type="text/javascript") //stock√© en local
  script(src="/socket.io/socket.io.js")
  script(type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/moment.js/2.6.0/moment.min.js")
  //TOASTR
  script(src= 'https://cdnjs.cloudflare.com/ajax/libs/toastr.js/2.0.3/js/toastr.min.js')
  link(href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/2.0.3/css/toastr.min.css" type="text/css" rel="stylesheet")
  //ENCRYPT
  script(src="/javascripts/gibberish-aes.js" typ="text/javascript")

  //Controller && CSS
  script(type="text/javascript" src="/javascripts/client.js")
  link(rel='stylesheet', href='/stylesheets/style.css')
  div(id="chat")
    .row(ng-show="!pseudo.show")
      label(ng-click="collapse.isCollapsed = !collapse.isCollapsed" ) Les loulouuuuuus
      img.pull-right.uiCtrl(ng-src="{{notif.img}}" ng-click="notif.click()")
      img.pull-right.uiCtrl(ng-src="{{sound.img}}" ng-click="sound.click()")
    //for logining
    form.container(ng-if="pseudo.show")
      h4 The chatator
      br
      .row
        .col-sm-5
          div.form-group.has-feedback.full-width
            input.form-control(type="text" id="pseudo-name" ng-model="pseudo.name" placeholder="Your name ...")
            span.glyphicon.form-control-feedback.hide.full-width
        .col-sm-5
          div.form-group.has-feedback.full-width
            input.form-control(type="password" ng-model="pseudo.password" id="password" placeholder="Your password ...")
            span.glyphicon.form-control-feedback.hide.full-width
        .col-sm-2
          button.btn.btn-default(ng-click="pseudo.checkPwd()" ng-disabled="!pseudo.canSubmit()") Go!
          button.btn.btn-default.pull-right(ng-click="page.go('/account')") Changer 

    //for chatting
    div(ng-if="!pseudo.show" collapse="collapse.isCollapsed")
      p Your pseudo: {{pseudo.pseudo}}
      form.form-group.row
        .col-sm-9
          textarea.form-control(id="txtArea" ng-keyup="message.sendKey($event)" ng-model="message.content" ng-focus="page.hasFocus()" placeholder="Votre message..." row="2" autofocus autocomplete="off")
        .col-sm-3
          button.btn.btn-default.pull-right(ng-click="message.send()") Envoyer!
          p {{users.toShow}}
      //the messages are displayed here
      .row
        .col-sm-9
          table.table-condensed(id="zone_chat")
            tbody
              tr(ng-repeat='msg in message.list | reverse | limitTo:message.count ')
                td.small {{message.getDate(msg.date)}} 
                td
                  strong(ng-class="msg.from_class") {{msg.from}}
                td
                  div(ng-bind-html="msg.content" ng-class="msg.css_class")
        .col-sm-3(ng-show="link.show()")
          h4 Private & link box 
          br
          table.table-condensed
            tbody
              tr(ng-repeat='lk in link.list | reverse | limitTo:30 ')
                td
                  p(ng-class="lk.from_class") {{lk.from}}
                td
                  div(ng-bind-html="lk.content" ng-class="lk.css_class")
          br
          br
  br
  br
  br
  br